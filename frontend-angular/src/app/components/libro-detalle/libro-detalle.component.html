<div class="container mt-4">
  <!-- Loading Spinner -->
  <div class="spinner-container" *ngIf="loading">
    <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
      <span class="visually-hidden">Cargando...</span>
    </div>
  </div>

  <!-- Error Message -->
  <div class="alert alert-danger" *ngIf="error">
    <i class="bi bi-exclamation-triangle"></i> {{ error }}
    <button class="btn btn-secondary ms-3" (click)="volver()">Volver al listado</button>
  </div>

  <!-- Detalle del Libro -->
  <div *ngIf="!loading && libro">
    <div class="mb-3">
      <button class="btn btn-secondary" (click)="volver()">
        <i class="bi bi-arrow-left"></i> Volver
      </button>
    </div>

    <div class="card shadow-lg">
      <div class="card-header bg-primary text-white">
        <h3 class="mb-0">
          <i class="bi bi-book"></i> {{ libro.titulo }}
        </h3>
      </div>
      <div class="card-body">
        <div class="row">
          <!-- Imagen del libro -->
          <div class="col-md-4">
            <div class="text-center mb-3">
              <img
                [src]="libro.portada || 'https://via.placeholder.com/300x400?text=Sin+Portada'"
                [alt]="libro.titulo"
                class="img-fluid rounded shadow"
                style="max-height: 400px; object-fit: cover;">
            </div>
            <div class="d-grid gap-2">
              <button class="btn btn-warning" (click)="editar()">
                <i class="bi bi-pencil"></i> Editar
              </button>
              <button class="btn btn-danger" (click)="eliminar()">
                <i class="bi bi-trash"></i> Eliminar
              </button>
            </div>
          </div>

          <!-- Información del libro -->
          <div class="col-md-8">
            <h5 class="text-primary">Información Básica</h5>
            <table class="table table-borderless">
              <tbody>
                <tr>
                  <td><strong><i class="bi bi-upc-scan"></i> ISBN:</strong></td>
                  <td>{{ libro.isbn }}</td>
                </tr>
                <tr>
                  <td><strong><i class="bi bi-person"></i> Autor:</strong></td>
                  <td>{{ libro.autor }}</td>
                </tr>
                <tr>
                  <td><strong><i class="bi bi-building"></i> Editorial:</strong></td>
                  <td>{{ libro.editorial }}</td>
                </tr>
                <tr>
                  <td><strong><i class="bi bi-calendar"></i> Año de Publicación:</strong></td>
                  <td>{{ libro.anioPublicacion }}</td>
                </tr>
                <tr>
                  <td><strong><i class="bi bi-translate"></i> Idioma:</strong></td>
                  <td>{{ libro.idioma }}</td>
                </tr>
                <tr>
                  <td><strong><i class="bi bi-file-text"></i> Páginas:</strong></td>
                  <td>{{ libro.numeroPaginas }}</td>
                </tr>
              </tbody>
            </table>

            <h5 class="text-primary mt-4">Géneros</h5>
            <div class="mb-3">
              <span class="badge bg-info me-2" *ngFor="let genero of libro.generos">
                {{ genero }}
              </span>
            </div>

            <h5 class="text-primary mt-4">Descripción</h5>
            <p class="text-muted">{{ libro.descripcion }}</p>

            <h5 class="text-primary mt-4">Disponibilidad y Precio</h5>
            <table class="table table-borderless">
              <tbody>
                <tr>
                  <td><strong><i class="bi bi-currency-euro"></i> Precio:</strong></td>
                  <td><h4 class="text-success mb-0">{{ libro.precio | currency:'EUR' }}</h4></td>
                </tr>
                <tr>
                  <td><strong><i class="bi bi-box"></i> Stock:</strong></td>
                  <td>
                    <span class="badge" [ngClass]="libro.stock > 0 ? 'bg-success' : 'bg-danger'">
                      {{ libro.stock }} unidades
                    </span>
                  </td>
                </tr>
                <tr>
                  <td><strong><i class="bi bi-check-circle"></i> Estado:</strong></td>
                  <td>
                    <span class="badge" [ngClass]="libro.disponible ? 'bg-success' : 'bg-danger'">
                      {{ libro.disponible ? 'Disponible' : 'No disponible' }}
                    </span>
                  </td>
                </tr>
              </tbody>
            </table>

            <div class="text-muted small mt-4">
              <p class="mb-1">
                <i class="bi bi-calendar-plus"></i> Creado:
                {{ libro.createdAt | date:'dd/MM/yyyy HH:mm' }}
              </p>
              <p class="mb-0" *ngIf="libro.updatedAt">
                <i class="bi bi-calendar-check"></i> Última actualización:
                {{ libro.updatedAt | date:'dd/MM/yyyy HH:mm' }}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

